import{c as U,l as H,D as J,r,j as e,L as V,B as h,C as f,as as W,U as L,at as A,au as D,I as j,G as K,X,av as Y,w as Z,q as Q,s as T,H as ee,z as c,aw as E}from"./index-55mznCYq.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=U("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=U("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),le=()=>{var k,z,_;const{user:a}=H(),{data:i}=J(),[g,p]=r.useState(!1),[N,y]=r.useState(!1),[b,v]=r.useState(!1),[d,M]=r.useState((a==null?void 0:a.profile_photo)||null),w=r.useRef(null),[o,P]=r.useState({name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||"",phone:(a==null?void 0:a.phone)||"",region_id:(a==null?void 0:a.region_id)||""}),R=(i==null?void 0:i.map(s=>({value:s.id,label:s.name})))||[],F=((k=i==null?void 0:i.find(s=>s.id===(a==null?void 0:a.region_id)))==null?void 0:k.name)||"Not set",m=s=>{const{name:t,value:n}=s.target;P(l=>({...l,[t]:n}))},q=async s=>{var t,n;s.preventDefault(),y(!0);try{const l=await E.updateProfile(o);l.data.success&&(localStorage.setItem("user",JSON.stringify(l.data.data)),c.success("Profile updated successfully!"),p(!1),window.location.reload())}catch(l){c.error(((n=(t=l.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to update profile")}finally{y(!1)}},B=()=>{P({name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||"",phone:(a==null?void 0:a.phone)||"",region_id:(a==null?void 0:a.region_id)||""}),p(!1)},C=()=>{var s;(s=w.current)==null||s.click()},O=async s=>{var n,l,I;const t=(n=s.target.files)==null?void 0:n[0];if(t){if(!t.type.startsWith("image/")){c.error("Please select an image file");return}if(t.size>5*1024*1024){c.error("Image must be less than 5MB");return}v(!0);try{const x=new FormData;x.append("photo",t);const u=await E.uploadProfilePhoto(x);if(u.data.success){M(u.data.data.profile_photo);const G={...a,profile_photo:u.data.data.profile_photo};localStorage.setItem("user",JSON.stringify(G)),c.success("Profile photo updated!")}}catch(x){c.error(((I=(l=x.response)==null?void 0:l.data)==null?void 0:I.message)||"Failed to upload photo")}finally{v(!1)}}},S=()=>d?d.startsWith("http")?d:`${ee.replace("/uploads","")}${d}`:null,$=s=>s?new Date(s).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}):"N/A";return e.jsx(V,{children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"My Profile"}),e.jsx("p",{className:"text-neutral-500 mt-1",children:"View and manage your account information"})]}),!g&&e.jsxs(h,{onClick:()=>p(!0),className:"flex items-center gap-2",children:[e.jsx(ae,{size:18}),"Edit Profile"]})]}),e.jsxs(f,{children:[e.jsxs("div",{className:"flex items-center gap-4 pb-6 border-b",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{onClick:C,className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center overflow-hidden cursor-pointer group",children:[b?e.jsx(W,{size:30,className:"text-primary-600 animate-spin"}):S()?e.jsx("img",{src:S(),alt:a==null?void 0:a.name,className:"w-full h-full object-cover"}):e.jsx(L,{size:40,className:"text-primary-600"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-full",children:e.jsx(A,{size:24,className:"text-white"})})]}),e.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:O,className:"hidden"}),e.jsx("button",{onClick:C,disabled:b,className:"absolute -bottom-1 -right-1 w-8 h-8 bg-primary-600 hover:bg-primary-700 text-white rounded-full flex items-center justify-center shadow-lg transition-colors",children:e.jsx(A,{size:14})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-800",children:a==null?void 0:a.name}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 mt-2 rounded-full text-sm font-medium ${(a==null?void 0:a.role)==="admin"?"bg-purple-100 text-purple-700":(a==null?void 0:a.role)==="buyer"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:[e.jsx(D,{size:14}),((z=a==null?void 0:a.role)==null?void 0:z.charAt(0).toUpperCase())+((_=a==null?void 0:a.role)==null?void 0:_.slice(1))]}),e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Click photo to change"})]})]}),g?e.jsxs("form",{onSubmit:q,className:"pt-6 space-y-4",children:[e.jsx(j,{label:"Full Name",name:"name",value:o.name,onChange:m,placeholder:"Enter your full name",required:!0}),e.jsx(j,{label:"Email Address",name:"email",type:"email",value:o.email,onChange:m,placeholder:"Enter your email"}),e.jsx(j,{label:"Phone Number",name:"phone",value:o.phone,onChange:m,placeholder:"Enter your phone number",required:!0}),e.jsx(K,{label:"Region",name:"region_id",value:o.region_id,onChange:m,options:R,placeholder:"Select your region"}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(h,{type:"submit",disabled:N,className:"flex items-center gap-2",children:[e.jsx(se,{size:18}),N?"Saving...":"Save Changes"]}),e.jsxs(h,{type:"button",variant:"secondary",onClick:B,className:"flex items-center gap-2",children:[e.jsx(X,{size:18}),"Cancel"]})]})]}):e.jsx("div",{className:"pt-6 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(L,{size:20,className:"text-neutral-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-500",children:"Full Name"}),e.jsx("p",{className:"font-medium text-neutral-800",children:(a==null?void 0:a.name)||"Not set"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Y,{size:20,className:"text-neutral-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-500",children:"Email Address"}),e.jsx("p",{className:"font-medium text-neutral-800",children:(a==null?void 0:a.email)||"Not set"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Z,{size:20,className:"text-neutral-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-500",children:"Phone Number"}),e.jsx("p",{className:"font-medium text-neutral-800",children:(a==null?void 0:a.phone)||"Not set"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Q,{size:20,className:"text-neutral-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-500",children:"Region"}),e.jsx("p",{className:"font-medium text-neutral-800",children:F})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(T,{size:20,className:"text-neutral-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-500",children:"Member Since"}),e.jsx("p",{className:"font-medium text-neutral-800",children:$(a==null?void 0:a.created_at)})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-neutral-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(D,{size:20,className:"text-neutral-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-500",children:"Account Status"}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${(a==null?void 0:a.is_active)!==!1?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:(a==null?void 0:a.is_active)!==!1?"Active":"Inactive"})]})]})]})})]}),e.jsxs(f,{children:[e.jsx("h3",{className:"section-title mb-4",children:"Security"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-neutral-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-neutral-800",children:"Password"}),e.jsx("p",{className:"text-sm text-neutral-500",children:"Last changed: Never"})]}),e.jsx(h,{variant:"secondary",size:"sm",children:"Change Password"})]})})]}),e.jsxs(f,{className:"bg-primary-50 border border-primary-100",children:[e.jsx("h4",{className:"font-semibold text-primary-800 mb-2",children:"ðŸ’¡ Keep Your Profile Updated"}),e.jsx("p",{className:"text-primary-700 text-sm",children:"An up-to-date profile helps buyers and sellers connect with you more easily. Make sure your phone number and region are correct for the best experience."})]})]})})};export{le as default};

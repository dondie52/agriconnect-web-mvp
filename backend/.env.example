# AgriConnect Backend Environment Variables
# Copy this file to .env and fill in your values

# ===========================================
# DATABASE CONFIGURATION
# ===========================================

# Option 1: Supabase/Production (Recommended)
# Use DATABASE_URL for Supabase or other hosted PostgreSQL
DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
SUPABASE_PROJECT_REF=[PROJECT-REF]  # Required when using Supabase pooled connections (pooler.supabase.*)

# Option 2: Local Development (Alternative)
# Uncomment these if not using DATABASE_URL
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=agriconnect
# DB_USER=postgres
# DB_PASSWORD=your_local_password

# ===========================================
# SERVER CONFIGURATION
# ===========================================

PORT=10000
NODE_ENV=development

# ===========================================
# AUTHENTICATION
# ===========================================

# IMPORTANT: Use a strong, unique secret in production!
# Generate one with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=AgriConnectSecret123
JWT_EXPIRES_IN=7d

# ===========================================
# CORS / FRONTEND CONFIGURATION
# ===========================================

# IMPORTANT: Set this to your actual frontend URL in production
# This controls which origins can make requests to your API
#
# For local development:
# FRONTEND_URL=http://localhost:3000
#
# For Vercel deployment (replace with your actual domain):
# FRONTEND_URL=https://agriconnect-web-mvp.vercel.app
#
# Multiple origins (comma-separated, no spaces after comma):
# FRONTEND_URL=https://agriconnect-web-mvp.vercel.app,https://www.agriconnect.com

FRONTEND_URL=http://localhost:3000

# ===========================================
# EXTERNAL APIS
# ===========================================

# OpenWeather API for weather data
OPENWEATHER_API_KEY=

# OpenAI API for AI features (optional)
OPENAI_API_KEY=

# ===========================================
# DEPLOYMENT CHECKLIST
# ===========================================

# For Render deployment:
# 1. Set DATABASE_URL to your Supabase connection string
# 2. Set PORT to 10000 (or Render's assigned port)
# 3. Set NODE_ENV to production
# 4. Set FRONTEND_URL to your Vercel frontend URL (e.g., https://agriconnect-web-mvp.vercel.app)
# 5. Set JWT_SECRET to a strong random string (NEVER use the default in production!)
# 6. Set OPENWEATHER_API_KEY if using weather features

# For Supabase:
# 1. Get your DATABASE_URL from Supabase Dashboard > Settings > Database
# 2. Use the "Connection string" under "URI" section
# 3. Make sure to use the correct password

# CORS Troubleshooting:
# - If mobile requests fail, check that FRONTEND_URL matches your deployed frontend exactly
# - Include https:// in the URL
# - Don't include trailing slashes
# - Check backend logs for "CORS rejected origin" messages
